<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Inicial</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body.dark-mode {
            background-color: rgb(0, 0, 0);
            color: #ffffff;
        }

        body.dark-mode .container {
            background-color: #032221;
        }

        body.dark-mode .container-fluid {
            background-color: #707d7d;
        }

        body.dark-mode .display-6 {
            color: #ffffff;

        }

        body.dark-mode .card {
            color: #ffffff;
            background-color: #000000;
        }

        .display-6 {
            color: #000000;

        }

        body.dark-mode .text {
            background-color: #f1f7f6;
        }

        body {
            background-color: #f1f7f6;
        }


        kbd {
            background-color: #6d9773;
            color: #000000;
        }

        body.dark-mode kbd {
            background-color: #2fa98c;
            color: #ffffff;
        }

        body.dark-mode button.btn {
            background-color: #2fa98c;
            color: #ffffff;
        }

        body.dark-mode .btn {

            color: #ffffff;
        }

        .btn {
            color: #000000;
        }


        button.btn {
            background-color: #6d9773;
            color: #000000;
        }

        .container {
            background-color: #0c3b2e;

        }



        .container-fluid {
            background-color: #fffcf1;

        }


        body.dark-mode .table th {
            background-color: #647972;
            color: white;
        }

        body.dark-mode .table td {
            background-color: #000000;
            color: #ffffff;
        }

        body.dark-mode .card div {
            gap: 10%;
        }

        .form-check-input:checked {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }

        body.dark-mode input {
            background-color: #707d7d;
            border-color: #f1f7f6;
            color: #f1f7f6;
        }

        a {
            text-decoration: none;
            color: #000000;
        }
    </style>
</head>

<body>


    <header>



        <nav class="navbar navbar-expand border ">

            <div class=" d-flex justify-content-start bg-transparent">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <div style="margin-left: 70%;" class="container-fluid bg-transparent">
                            <b><a href="#site" target="_blank" style="font-size: 100%;">
                                    <h5 class="display-6" style="font-size: 150%;">MedBay</h5>
                            </b></a>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="container d-flex justify-content-end bg-transparent">
                <ul class="navbar-nav">

                    <li class="nav-item">
                        <div class="container bg-transparent" style="margin-top: 8%;">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="theme-toggle">
                                <label class="form-check-label" for="theme-toggle">Modo Escuro</label>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">





                        <button type="button" data-bs-toggle="modal" data-bs-target="#modalAdd" class="btn ">
                            <h6 class="display-6" style="font-size: 150%;">Adicionar</h6>
                        </button>



                        <div class="modal fade" id="modalAdd">
                            <div class="modal-dialog">
                                <div class="container-fluid modal-content">

                                    <div class="modal-header">
                                        <h5 class="display-6">O que você deseja adicionar?</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

                                    </div>

                                    <div class="container-fluid modal-body">

                                        <div class="container-fluid">

                                            <div class=" container-fluid  d-flex justify-content-between "
                                                style="margin-top: 8%; margin-bottom: 10%;">

                                                <button type="button" data-bs-toggle="modal"
                                                    data-bs-target="#modalPaciente" class="btn  m-3">
                                                    Adicionar Paciente
                                                </button>


                                                <button type="button" data-bs-toggle="modal"
                                                    data-bs-target="#modalMedicamento" class="btn  m-3">
                                                    Adicionar Medicamento
                                                </button>


                                                <button type="button" data-bs-toggle="modal"
                                                    data-bs-target="#modalVenda" class="btn  m-3">
                                                    Adicionar venda
                                                </button>




                                            </div>
                                        </div>

                                    </div>



                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
        </nav>


        <div class="modal fade" id="modalPaciente">

            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-content">

                        <div class="container-fluid modal-body">


                            <div class="container-fluid ">
                                <h1>Adicionar paciente</h1>
                                <form action="/criar-paciente" method="post">
                                    <input type="hidden" id="id" name="id">
                                    <label for="nome_paciente">Nome do Paciente:</label>
                                    <input type="text" class="form-control" id="nome_paciente" name="nome_paciente"
                                        required></br></br>
                                    <label for="data_nascimento">Data de Nascimento:</label>
                                    <input type="date" class="form-control" id="data_nascimento" name="data_nascimento"
                                        required></br></br>
                                    <label for="documento">Documento:</label>
                                    <input type="number" class="form-control" id="documento" name="documento"
                                        required></br></br>
                                    <button type="submit" class="btn btn-primary btn-block">Adicionar</button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="modal fade" id="modalMedicamento">

            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-content">

                        <div class="container-fluid modal-body ">

                            <div class="container-fluid">
                                <h1>Adicionar medicamentos</h1>
                                <form action="/criar-medicamentos" method="post">
                                    <input type="hidden" id="id" name="id">
                                    <label for="nome_medicamento">Nome do medicamento:</label>
                                    <input type="text" class="form-control" id="nome_medicamento"
                                        name="nome_medicamento" required></br></br>
                                    <label for="codigo">Código</label><br>
                                    <input type="number" class="codigo" id="codigo" name="codigo" required></br></br>
                                    <label for="dosagem">Dosagem:</label><br>
                                    <input type="text" class="form-control" id="dosagem" name="dosagem"
                                        required></br></br>
                                    <button type="submit" class="btn btn-primary btn-block">Adicionar</button>
                                </form>
                            </div>



                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalVenda">

            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-content">

                        <div class="container-fluid modal-body ">


                            <div class="container-fluid">
                                <h1>Adicionar venda</h1>
                                <form action="/criar-venda" method="post">
                                    <input type="hidden" id="id" name="id">
                                    <label for="data_compra">Data da Compra:</label>
                                    <input type="date" class="form-control" id="data_compra" name="data_compra"
                                        required></br></br>
                                    <label for="info_paciente">Informação do Paciente</label>
                                    <input type="text" class="form-control" id="info_paciente" name="info_paciente"
                                        required></br></br>
                                    <label for="info_medicamento">Informação do Medicamento:</label>
                                    <input type="text" class="form-control" id="info_medicamento"
                                        name="info_medicamento" required></br></br>
                                    <label for="qtde">Quantidade:</label>
                                    <input type="number" class="form-control" id="qtde" name="qtde" required></br></br>
                                    <button type="submit" class="btn btn-primary btn-block">Adicionar</button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>



    <div class="container-fluid bg-transparent" style="width: 50%;">
        <div class="container mt-5 text-center  p-5 rounded ">
            <div class="container-fluid   p-5 rounded">
                <div class="container-fluid mt-6 text-center p-6 ">
                    <form id="buscar-nome-form" action="/buscar-nome" method="get">

                        <input type="text" id="novo-medicamento" name="novo-medicamento"
                            class="  border rounded form-control" style=" padding-bottom: 5%; padding-right: 50%;"
                            placeholder=" Procure pelo nome medicamento">
                    </form>
                    <div id="resultado"></div>

                </div>
                <div class="container-fluid  text-center " style="margin-top: 10%; margin-bottom: 10%;">
                    <button type="button" class="border-0  bg-transparent" data-bs-toggle="modal"
                        data-bs-target="#modal-ler">
                        <kbd class="display-1 p-4" style="font-size: 105%;">Ver Dados Por Id</kbd>
                    </button>
                </div>
            </div>
            <div class="modal fade" id="modal-ler">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <div class="container-fluid modal-header">
                            <h4 class="modal-title">O que você deseja ver?</h4>
                            <button type="button" class="btn-close" data-bs-toggle="modal"></button>
                        </div>
                        <div class=" container-fluid modal-body">
                            <div class=" container-fluid p-2">
                                <form action="/pacientes" method="GET" class="d-flex">
                                    <button type="submit" class="btn ">Ver todos os pacientes</button>
                                </form>
                            </div>
                            <div class=" container-fluid p-2">
                                <form action="/medicamentos" method="GET" class="d-flex">
                                    <button type="submit" class="btn ">Ver todos os medicamentos</button>
                                </form>
                            </div>
                            <div class=" container-fluid p-2">
                                <form action="/vendas" method="GET" class="d-flex">
                                    <button type="submit" class="btn ">Ver todas as vendas</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>




        </div>
    </div>


    <div class="container-fluid text-center bg-transparent" style="margin-top: 5%;">

        <table class="table table-bordered">
            <tbody>
                <thead>
                    <tr>
                        <th>
                            <a href="#paciente" class="btn  " data-bs-toggle="collapse">
                                <h4 class="display-6" style="font-size: 150%;">Pacientes</h4>
                            </a>
                        </th>
                        <th>
                            <a href="#medicamento" class="btn " data-bs-toggle="collapse">
                                <h4 class="display-6" style="font-size: 150%;">Medicamentos</h4>
                            </a>
                        </th>
                        <th>
                            <a href="#venda" class="btn " data-bs-toggle="collapse">
                                <h4 class="display-6" style="font-size: 150%;">Vendas</h4>
                            </a>
                        </th>
                    </tr>
                </thead>
            </tbody>
        </table>

        <div class="container-fluid  bg-dark border">

        </div>

        <div id="paciente" class="collapse " data-bs-parent="#accordion">


            <table class="table table-bordered text-center table-hover ">
                <thead class="thead-light">
                    <tr>
                        <th>Nome do Paciente</th>
                        <th>Data de Nascimento</th>
                        <th>Número do documento</th>
                        <th>Gerenciar</th>
                    </tr>
                </thead>
                <tbody id="pacientes-tabela">

                </tbody>
            </table>


            <table class="d-flex justify-content-center">
                <tbody>
                    <tr id="pacientes-cards">

                    </tr>
                </tbody>
            </table>

        </div>
        <br><br>

        <div id="medicamento" class="collapse ">


            <table class="table table-bordered text-center">
                <thead class="thead-light">
                    <tr>
                        <th>Nome do medicamento</th>
                        <th>Código</th>
                        <th>Dosagem</th>
                        <th>Gerenciar</th>
                    </tr>
                </thead>
                <tbody id="medicamentos-tabela">

                </tbody>
            </table>


            <table class="d-flex justify-content-center">
                <tbody>
                    <tr id="medicamentos-cards">

                    </tr>
                </tbody>
            </table>

        </div>
        <br><br>
        <div id="venda" class="collapse ">


            <table class="table table-bordered text-center">
                <thead class="thead-light">
                    <tr>
                        <th>Data Compra</th>
                        <th>Informação do Paciente</th>
                        <th>Informação Medicamento</th>
                        <th>Quantidade</th>
                        <th>Gerenciar</th>
                    </tr>
                </thead>
                <tbody id="vendas-tabela">

                </tbody>
            </table>


            <table class="d-flex justify-content-center">
                <tbody>
                    <tr id="vendas-cards">

                    </tr>
                </tbody>
            </table>

        </div>
        <br><br>
    </div>



    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/pacientes')
                .then(response => response.json())
                .then(pacientes => {
                    const tabela = document.getElementById('pacientes-tabela');
                    tabela.innerHTML = pacientes.map(paciente => `
                    <tr>
                        <td>${paciente.nome_paciente}</td>
                        <td>${paciente.data_nascimento}</td>
                        <td>${paciente.documento}</td>
                        <td>

                            

                            <div class="btn-group btn-group-sm" role="group">
                                 <a href="/atualizar?id=${paciente._id}" class="btn btn-warning bg-transparent rounded " style="margin-right:5%; padding-top:5%; margin-bottom:20%; padding-bottom:5%;">Atualizar</a>
                                 
                                <form action="/deletar-paciente" method="post" onsubmit="return d('Deseja excluir o documento do Paciente?');" style="display:inline;">
                                    <input type="hidden" name="id" value="${paciente._id}">
                                    <button type="submit" class="btn btn-danger bg-transparent">Deletar</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                `).join('');
                })
                .catch(error => console.error('Erro ao carregar pacientes:', error));

        });

        document.addEventListener('DOMContentLoaded', () => {
            fetch('/medicamentos')
                .then(response => response.json())
                .then(medicamentos => {
                    const tabela = document.getElementById('medicamentos-tabela');
                    tabela.innerHTML = medicamentos.map(medicamento => `
                    <tr>
                        <td>${medicamento.nome_medicamento}</td>
                        <td>${medicamento.codigo}</td>
                        <td>${medicamento.dosagem}</td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                 <a href="/medicamentoaura?id=${medicamento._id}"  class="btn btn-warning bg-transparent rounded " style="margin-right:5%; padding-top:5%; margin-bottom:20%; padding-bottom:5%;">Atualizar</a>
                                 
                                <form action="/deletar-medicamentos" method="post" onsubmit="return confirm('Deseja excluir o documento do medicamento?');" style="display:inline;">
                                    <input type="hidden" name="id" value="${medicamento._id}">
                                    <button type="submit" class="btn btn-danger bg-transparent">Deletar</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                `).join('');
                })
                .catch(error => console.error('Erro ao carregar medicamentos:', error));

        });

        document.addEventListener('DOMContentLoaded', () => {
            fetch('/vendas')
                .then(response => response.json())
                .then(vendas => {
                    const tabela = document.getElementById('vendas-tabela');
                    tabela.innerHTML = vendas.map(venda => `
                    <tr>
                        <td>${venda.data_compra}</td>
                        <td>${venda.info_paciente}</td>
                        <td>${venda.info_medicamento}</td>
                        <td>${venda.qtde}</td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group" style="margin-right: 20%;">
                                 <a href="/vendaupdate?id=${venda._id}"  class="btn btn-warning bg-transparent rounded " style="margin-right:5%; padding-top:5%; margin-bottom:20%; padding-bottom:5%;">Atualizar</a>
                                 
                                <form action="/deletar-venda" method="post" onsubmit="return confirm('Deseja excluir o documento das vendas?');" style="display:inline;">
                                    <input type="hidden" name="id" value="${venda._id}">
                                    <button type="submit" class="btn btn-danger bg-transparent">Deletar</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                `).join('');
                })
                .catch(error => console.error('Erro ao carregar pacientes:', error));

        });

        document.addEventListener('DOMContentLoaded', () => {
            fetch('/pacientes')
                .then(response => response.json())
                .then(pacientes => {
                    const card = document.getElementById('pacientes-cards');
                    card.innerHTML = pacientes.map(paciente => `
                      <tr>
                        <td>
                        <div class="card border">
        <div class="card-body"> <h5 class="card-title"> Nome do paciente:</h5>
                <p >${paciente.nome_paciente}</p>
                <h5 class="card-title">Data de Nascimento:</h5>
                <p class="card-text">${paciente.data_nascimento} </p>
                <h5 class="card-title"> Documento do paciente:</h5>
                <p class="card-text">${paciente.documento}</p>
        </div>
    </div>
    </td>
   </tr>
`).join('');
                })
                .catch(error => console.error('Erro ao carregar paciente:', error));

        });



        document.addEventListener('DOMContentLoaded', () => {
            fetch('/medicamentos')
                .then(response => response.json())
                .then(medicamentos => {
                    const card = document.getElementById('medicamentos-cards');
                    card.innerHTML = medicamentos.map(medicamento => `
                    <tr>
                        <td>
                    <div class="card border">
        <div class="card-body">
            <h5 class="card-title"> Nome do medicamento:</h5>
                <p class="card-title">${medicamento.nome_medicamento}</p>
                <h5 class="card-title"> Codigo do Medico:</h5>
                <p class="card-text">${medicamento.codigo} </p>
                <h5 class="card-title"> Dosagem em Ml:</h5>
                <p class="card-text">${medicamento.dosagem}</p>
                
            </div>
    </div>
</div>
    </td>
   </tr>
`).join('');
                })
                .catch(error => console.error('Erro ao carregar paciente:', error));

        });


        document.addEventListener('DOMContentLoaded', () => {
            fetch('/vendas')
                .then(response => response.json())
                .then(vendas => {
                    const card = document.getElementById('vendas-cards');
                    card.innerHTML = vendas.map(venda => `
                <div class="card border">
        <div class="card-body"><h5 class="card-title"> Data de compra:</h5>
                <h5 class="card-title">${venda.data_compra}</h5>
                <p class="card-title"> informação do paciente:</p>
                <p class="card-text">${venda.info_paciente} </p>
                <h5 class="card-title"> informação do medicamento:</h5>
                <p class="card-text">${venda.info_medicamento}</p>
                <h5 class="card-title"> Quantidade:</h5>
                <p class="card-text">${venda.qtde}</p>
            </div>
    </div>
`).join('');
                })
                .catch(error => console.error('Erro ao carregar venda:', error));

        });




        document.addEventListener('DOMContentLoaded', function () {
            const toggleSwitch = document.getElementById('theme-toggle');
            const isDarkMode = localStorage.getItem('dark-mode') === 'true';

            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                toggleSwitch.checked = true;
            }

            toggleSwitch.addEventListener('change', function () {
                if (toggleSwitch.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('dark-mode', 'true');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('dark-mode', 'false')
                }
            })
        })
    </script>













    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>